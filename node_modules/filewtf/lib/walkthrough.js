const fs = require('fs')
const path = require('path')

function getFilePathsRecursiveHelper (rootDir) {
  const entryPaths = fs.readdirSync(rootDir).map((entry) => {
    return path.join(rootDir, entry)
  })
  const filePaths = entryPaths.filter((entryPath) => {
    return fs.statSync(entryPath).isFile()
  })
  const dirPaths = entryPaths.filter(entryPath => !filePaths.includes(entryPath))
  const dirFiles = dirPaths.reduce((prev, curr) => prev.concat(getFilePathsRecursiveHelper(curr)), [])
  return [...filePaths, ...dirFiles]
}

function walkthrough (rootDir) {
  const files = getFilePathsRecursiveHelper(rootDir)
  return files
}

module.exports = walkthrough
