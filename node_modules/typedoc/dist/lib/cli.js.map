{"version":3,"file":"cli.js","sourceRoot":"","sources":["../../src/lib/cli.ts"],"names":[],"mappings":";;;;;;;;AAAA,yCAAyC;AAEzC,+CAA4C;AAC5C,6CAA6C;AAC7C,+CAAsD;AACtD,qDAAyE;AACzE,+DAAkE;AAGlE,IAAkB,QAMjB;AAND,WAAkB,QAAQ;IACtB,qDAAe,CAAA;IACf,uDAAgB,CAAA;IAChB,+CAAY,CAAA;IACZ,uDAAgB,CAAA;IAChB,qDAAe,CAAA;AACnB,CAAC,EANiB,QAAQ,GAAR,gBAAQ,KAAR,gBAAQ,QAMzB;AAED,MAAa,cAAe,SAAQ,yBAAW;IAgB3C,SAAS,CAAC,OAAsC;QAC5C,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,yBAAe,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,uBAAa,EAAE,CAAC,CAAC;QAC5C,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,yBAAc,EAAE,CAAC,CAAC;QAC7C,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,yBAAe,CAAC,GAAG,CAAC,CAAC,CAAC;QAEjD,MAAM,MAAM,GAAG,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QACxC,IAAI,MAAM,CAAC,SAAS,EAAE;YAClB,OAAO,OAAO,CAAC,IAAI,GAAsB,CAAC;SAC7C;QAED,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;SACzC;aAAM,IAAI,IAAI,CAAC,IAAI,EAAE;YAClB,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,qBAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;SACtD;aAAM,IAAI,MAAM,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;YACvC,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,qBAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YACnD,OAAO,CAAC,IAAI,GAAuB,CAAC;SACvC;aAAM;YACH,MAAM,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;YACrD,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YAClC,IAAI,OAAO,EAAE;gBACT,IAAI,IAAI,CAAC,GAAG,EAAE;oBACV,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;iBACxC;gBACD,IAAI,IAAI,CAAC,IAAI,EAAE;oBACX,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;iBACzC;gBACD,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;oBACzB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,wCAAwC,CAAC,CAAC;oBAC1D,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,qEAAqE,CAAC,CAAC;oBACvF,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;iBACxC;gBACD,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE;oBACzB,OAAO,CAAC,IAAI,GAAsB,CAAC;iBACtC;aACJ;iBAAM;gBACH,OAAO,CAAC,IAAI,GAAuB,CAAC;aACvC;SACJ;QAED,OAAO,MAAM,CAAC;IAClB,CAAC;CACJ;AAzDG;IADC,oBAAU,CAAC,KAAK,CAAC;2CACL;AAGb;IADC,oBAAU,CAAC,MAAM,CAAC;4CACL;AAGd;IADC,oBAAU,CAAC,SAAS,CAAC;+CACJ;AAGlB;IADC,oBAAU,CAAC,MAAM,CAAC;4CACJ;AAXnB,wCA2DC","sourcesContent":["import * as typescript from 'typescript';\n\nimport { Application } from './application';\nimport { BindOption } from './utils/options';\nimport { getOptionsHelp } from './utils/options/help';\nimport { ArgumentsReader, TypeDocReader } from './utils/options/readers';\nimport { TSConfigReader } from './utils/options/readers/tsconfig';\nimport { TypeDocAndTSOptions } from './utils/options/declaration';\n\nexport const enum ExitCode {\n    OptionError = 1,\n    NoInputFiles = 2,\n    NoOutput = 3,\n    CompileError = 4,\n    OutputError = 5\n}\n\nexport class CliApplication extends Application {\n    @BindOption('out')\n    out!: string;\n\n    @BindOption('json')\n    json!: string;\n\n    @BindOption('version')\n    version!: boolean;\n\n    @BindOption('help')\n    help!: boolean;\n\n    /**\n     * Run TypeDoc from the command line.\n     */\n    bootstrap(options?: Partial<TypeDocAndTSOptions>) {\n        this.options.addReader(new ArgumentsReader(0));\n        this.options.addReader(new TypeDocReader());\n        this.options.addReader(new TSConfigReader());\n        this.options.addReader(new ArgumentsReader(300));\n\n        const result = super.bootstrap(options);\n        if (result.hasErrors) {\n            return process.exit(ExitCode.OptionError);\n        }\n\n        if (this.version) {\n            typescript.sys.write(this.toString());\n        } else if (this.help) {\n            typescript.sys.write(getOptionsHelp(this.options));\n        } else if (result.inputFiles.length === 0) {\n            typescript.sys.write(getOptionsHelp(this.options));\n            process.exit(ExitCode.NoInputFiles);\n        } else {\n            const src = this.expandInputFiles(result.inputFiles);\n            const project = this.convert(src);\n            if (project) {\n                if (this.out) {\n                    this.generateDocs(project, this.out);\n                }\n                if (this.json) {\n                    this.generateJson(project, this.json);\n                }\n                if (!this.out && !this.json) {\n                    this.logger.log(\"No 'out' or 'json' option has been set\");\n                    this.logger.log(\"The './docs' directory has be set as the output location by default\");\n                    this.generateDocs(project, './docs');\n                }\n                if (this.logger.hasErrors()) {\n                    process.exit(ExitCode.OutputError);\n                }\n            } else {\n                process.exit(ExitCode.CompileError);\n            }\n        }\n\n        return result;\n    }\n}\n"]}